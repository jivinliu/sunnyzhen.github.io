<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>天天撸管</title>
<link rel="apple-touch-icon-precomposed" href="http://sunnyzhen.github.io/test/img/app_icon.png" />


<style type="text/css">
	*{ margin:0; padding:0;}
	body{ height:100%; width:100%; overflow:hidden;}
	.ball_wrap{ height:100%; width:100%; position:absolute; left:0px; top:0px;}
	.ball{ background:#333; height:30px; width:30px; border:1px solid #555; box-shadow:0px 0px 2px rgba(0,0,0,0.1); position:absolute; left:50%; top:50%; margin:-15px 0 0 -15px; border-radius:30px;}
	.data_wrap{ width:100%; text-align:center;}
	.data_wrap .txt{ font-size:20px; font-family:"microsoft yahei"; text-align:center;}
	.data_wrap .num{ font-size:120px; font-family:"Arial";}
	.tips_wrap{font-size:30px; font-family:"microsoft yahei"; text-align:center; margin:50px auto;}
	
	.history_score .num{ font-size:60px; font-family:"Arial";}
</style>
<script language="javascript" type="text/javascript" src="http://sunnyzhen.github.io/public/js/jquery-2.0.0.min.js"></script>
<script>
 
function init(){
　　if (window.DeviceMotionEvent) {
　　　　// 移动浏览器支持运动传感事件
　　　　window.addEventListener('devicemotion', deviceMotionHandler, false);
　　
　　} else{
　　　　// 移动浏览器不支持运动传感事件
　　
　　} 
}

var history_max_item=0;
var current_item=0;
var str="";

function deviceMotionHandler(eventData) {
　　// 获取含重力的加速度
　　	var acceleration = eventData.accelerationIncludingGravity;
	var x_large=0; 
	var x_small=0; 
	if(acceleration.x<=10&&acceleration.x>=-10){
		current_item=0;
	}
	/*str+=acceleration.x+"<br/>";
	$(".test").html(str);*/
	if(acceleration.x>10||acceleration.x<-10){
		if(acceleration.x>x_large){
			x_large=acceleration.x
		}
		if(acceleration.x<x_small){
			x_small=acceleration.x
		}
		
		if(Math.round(Math.abs(x_large))>Math.round(Math.abs(x_small))){
			if(Math.round(Math.abs(x_large))>current_item){
				current_item=Math.round(Math.abs(x_large));
			}
		}
		else{
			if(Math.round(Math.abs(x_small))>current_item){
				current_item=Math.round(Math.abs(x_small));
			}
		}
		$(".current_score .num").html(current_item);
		
		/*
		if(Math.abs(x_large)>max_item){
			max_item=Math.round(Math.abs(x_large));
		}
		if(Math.abs(x_small)>max_item){
			max_item=Math.round(Math.abs(x_small));
		}
		$(".current_score .num").html(max_item);*/
		
		if(current_item>history_max_item){
			history_max_item=current_item;
		}
		else{
			
		}
		$(".history_score .num").html(history_max_item);
		
		
		getTips(current_item);
		
	}
  	/*if(acceleration.x>=20){
		$(".data_wrap").html(acceleration.x);
	}
	if(acceleration.x<=-20){
		$(".data_wrap").html(acceleration.x);
	}*/
	
   /*if(acceleration.x<1){}
   else{
    tr+=acceleration.y +"<br/>";// +acceleration.y +"<br/>"+acceleration.z +"<br/>"
	$(".data_wrap").html(tr);
   }*/
   /*
   	switch(max_item)
	{
		  case 10:
		   $(".tips_wrap").html("拜托！大力点！管都撸不动好不好！");
		  case 20:
		   $(".tips_wrap").html("我只想安静的撸一管！");
		  case 30:
		   $(".tips_wrap").html("撸那么大力，你以为有杜蕾斯拿啊！");
		  case 40:
		   $(".tips_wrap").html("继续撸！继续撸！奇摩橘！");
		  case 50:
		   $(".tips_wrap").html("撸管不要用两只手，好吗！");
		  case 60:
		   $(".tips_wrap").html("你天天撸管，你妈造吗！");
		  case 70:
		   $(".tips_wrap").html("医生说：一天三次！饭后再撸！");  
		  case 80:
		   $(".tips_wrap").html("撸管达人！你好！");
		  default:
		   $(".tips_wrap").html("你！屌！爆了！Bong！");
	}*/
　
} 

function getTips(current_item){
	if(current_item>=10&&current_item<20){
			$(".tips_wrap").html("拜托！大力点！管都撸不动好不好！");
		}
		else if(current_item>=20&&current_item<30){
			$(".tips_wrap").html("我只想安静的撸一管！");
		}
		else if(current_item>=30&&current_item<40){
			$(".tips_wrap").html("撸那么大力，你以为有杜蕾斯拿啊！");
		}
		else if(current_item>=40&&current_item<50){
			$(".tips_wrap").html("继续撸！继续撸！奇摩橘！");
		}
		else if(current_item>=50&&current_item<60){
			$(".tips_wrap").html("撸管不要用两只手，好吗！");
		}
		else if(current_item>=60&&current_item<70){
			$(".tips_wrap").html("你天天撸管，你妈造吗！");
		}
		else if(current_item>=70&&current_item<80){
			$(".tips_wrap").html("医生说：一天三次！饭后再撸！");
		}
		else if(current_item>=80&&current_item<90){
			$(".tips_wrap").html("你！屌！爆了！Bong！");
		}
		else{
			$(".tips_wrap").html("撸管达人！你好！"); 
		}
}
</script>

<script>
$(document).ready(function(){
init();
});


/*微信转发图片*/

var imgUrl = 'http://sunnyzhen.github.io/public/img/sunny.jpg';
var lineLink = location.href;
var descContent = "天天撸管！出品人-陈某真";
var shareTitle = document.title;
var appid = '';

function shareFriend() {
	WeixinJSBridge.invoke('sendAppMessage',{
		"appid": appid,
		"img_url": imgUrl,
		"img_width": "200",
		"img_height": "200",
		"link": lineLink,
		"desc": descContent,
		"title": shareTitle
	}, function(res) {
		//_report('send_msg', res.err_msg);
	})
}
function shareTimeline() {
	WeixinJSBridge.invoke('shareTimeline',{
		"img_url": imgUrl,
		"img_width": "200",
		"img_height": "200",
		"link": lineLink,
		"desc": descContent,
		"title": shareTitle
	}, function(res) {
		   //_report('timeline', res.err_msg);
	});
}
function shareWeibo() {
	WeixinJSBridge.invoke('shareWeibo',{
		"content": descContent,
		"url": lineLink,
	}, function(res) {
		//_report('weibo', res.err_msg);
	});
}
// 当微信内置浏览器完成内部初始化后会触发WeixinJSBridgeReady事件。
document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
	// 发送给好友
	WeixinJSBridge.on('menu:share:appmessage', function(argv){
		shareFriend();
	});
	// 分享到朋友圈
	WeixinJSBridge.on('menu:share:timeline', function(argv){
		shareTimeline();
	});
	// 分享到微博
	WeixinJSBridge.on('menu:share:weibo', function(argv){
		shareWeibo();
	});
}, false);

	
</script>

</head>

<body>
<div class="data_wrap history_score"><span class="txt">最高撸管分：</span><span class="num">0</span></div>
<div class="data_wrap current_score"><span class="txt">当前撸管分：</span><span class="num">0</span></div>
<div class="tips_wrap"></div>
<div class="test"></div>
<!--<p>左右：<span id="alpha">0</span></p>  
<p>前后：<span id="beta">0</span></p>  
<p>扭转：<span id="gamma">0</span></p>  
<p>指北针指向：<span id="heading">0</span>度</p>  
<p>指北针精度：<span id="accuracy">0</span>度</p>-->
        
<!--<div class="ball_wrap">
	<div class="ball"></div>
</div>-->

</body>
</html>
