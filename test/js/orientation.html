<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>手机摇转</title>
<link rel="apple-touch-icon-precomposed" href="http://sunnyzhen.github.io/test/img/app_icon.png" />


<style type="text/css">
	*{ margin:0; padding:0;}
	body{ height:100%; width:100%; overflow:hidden;}
	.ball_wrap{ height:100%; width:100%; position:absolute; left:0px; top:0px;}
	.ball{ background:#333; height:30px; width:30px; border:1px solid #555; box-shadow:0px 0px 2px rgba(0,0,0,0.1); position:absolute; left:50%; top:50%; margin:-15px 0 0 -15px; border-radius:30px;}
</style>

<script language="javascript" type="text/javascript" src="http://sunnyzhen.github.io/public/js/jquery-2.0.0.min.js"></script>
<script language="javascript" type="text/javascript">
	$(document).ready(function(){
		function orientationHandler(event) {  
        /*    document.getElementById("alpha").innerHTML = event.alpha;  
            document.getElementById("beta").innerHTML = event.beta;  
            document.getElementById("gamma").innerHTML = event.gamma;  
            document.getElementById("heading").innerHTML = event.webkitCompassHeading;  
            document.getElementById("accuracy").innerHTML = event.webkitCompassAccuracy;  */
			
			var s_top=($(".ball_wrap").height()-$(".ball").height())/2;
			var s_left=($(".ball_wrap").width()-$(".ball").width())/2;
			var top=0;
			var left=0;
			
			if(Math.round(event.beta)>=s_top){
				top=s_top;
			}
			else if(Math.round(event.beta)<=-s_top){
				top=-s_top;
			}
			else
				top=Math.round(event.beta);
			
			if(Math.round(event.gamma)>=s_left){
				left=s_left;
			}
			else if(Math.round(event.gamma)<=-s_left){
				left= -s_left;
			}
			else
				left=Math.round(event.gamma);
			
			$(".ball").css({
				"top": top+"px",
				"left": left+"px"
			});
        }  
          
        if (window.DeviceOrientationEvent) {  
          window.addEventListener("deviceorientation", orientationHandler, false);  
        }
	});
</script>

</head>

<body>

<!--<p>左右：<span id="alpha">0</span></p>  
<p>前后：<span id="beta">0</span></p>  
<p>扭转：<span id="gamma">0</span></p>  
<p>指北针指向：<span id="heading">0</span>度</p>  
<p>指北针精度：<span id="accuracy">0</span>度</p>-->
        
<div class="ball_wrap">
	<div class="ball"></div>
</div>

</body>
</html>
