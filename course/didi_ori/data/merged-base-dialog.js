!function(window,undefined){var dd=window.dd||{};if(!dd||!dd.base){window.dd=dd;var b=dd.base||{},isObj=function(t){return"[object Object]"===Object.prototype.toString.call(t)},each=function(t,e){if(t.length)for(var n=0,i=t.length;i>n&&!1!==e.call(t[n]||{},n,t[n]);n++);else if(isObj(t))for(var o in t)if(!1===e.call(t[o]||{},o,t[o]))break};dd.each=each,dd.isObj=isObj,dd.extend=function(t){return each(arguments,function(e,n){if(e>0&&n)for(var i in n)t[i]=n[i]}),t},b.diffPlatform=function(t){var e=navigator.userAgent,n=function(t){"function"==typeof t&&t()};e.match(/(Android)/i)?n(t.android):e.match(/(iPhone|iPod|ios|iPad)/i)?n(t.ios):e.match(/(Windows phone)/i)?n(t.wp):n(t.others)},b.loadJS=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,document.getElementsByTagName("head")[0].appendChild(n),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||"function"==typeof e&&e()}},b.jsonp=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t+(t.indexOf("?")>-1?"&":"?")+"callback=dd.jsonp."+e,document.getElementsByTagName("head")[0].appendChild(n)},b.touch=function(t,e){t&&"function"==typeof e&&(t.addEventListener("touchstart",function(t){t.target.focus(),t.stopPropagation()},!1),t.addEventListener("touchmove",function(t){t.target.setAttribute("moved","true")},!1),t.addEventListener("touchend",function(t){t.target.blur(),"true"!==t.target.getAttribute("moved")?e(t):t.target.setAttribute("moved","false")},!1))},b.getElesByKls=function(t,e){if(t=t?t:document.body,t.getElementsByClassName)return t.getElementsByClassName(e);for(var n=[],i=t.getElementsByTagName("*"),o=0,a=i.length;a>o;o++)i[o].getAttribute&&-1!==i[o].getAttribute("className").indexOf(e)&&n.push(i[o]);return n},b.getQueryStr=function(){var t,e,n,i={},o=location.search.length?location.search.substring(1):"";if(!o)return i;if(-1===o.indexOf("&")&&o.indexOf("=")>-1)return t=o.split("="),e=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]),e&&(i[e]=n||""),i;if(o.indexOf("&")>-1){items=o.split("&");for(var a=0,r=items.length;r>a;a++)t=items[a].split("="),e=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]),e&&(i[e]=n);return i}},b.txtToJson=function(txt){if(txt){var j={};try{j=JSON.parse(txt)}catch(e){try{j=eval("("+txt+")")}catch(ee){}}return j}};var _singleton=function(t){var e=null;return function(){return e||(e=t.apply(this,arguments))}},createXhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}},_XHR=_singleton(createXhr);b.ajax=function(t){var e=function(t){if(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+="&"+n+"="+t[n]);return e.replace(/^\&/,"")}};if(t){var n=t.isSequenceReq===!0?new _XHR:createXhr();t.isSequenceReq===!0&&0!==n.readyState&&n.abort();var i=0,o=t.timeout;if(t.async!==!1&&(t.async=!0),n.open(t.method,t.url,t.async),n.onreadystatechange=function(){4===n.readyState&&(i&&clearTimeout(i),200===n.status?t.succFunc(n.responseText):t.failFunc(n.responseText))},"GET"===t.method.toUpperCase())n.send(null);else if("POST"===t.method.toUpperCase()){var a=t.data?e(t.data):"";n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a)}if(o){var r=o.millisecond||1e4;i=setTimeout(function(){n.abort(),o.callback&&o.callback()},r)}}},b.setCookie=function(t,e,n,i){var o=new Date;n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),i===!0&&(i=document.domain.replace(/[\a-\z\A-\Z]+/,""));var a=i?";domain="+i+";path=/":"";document.cookie=t+"="+escape(e)+";expires="+o.toGMTString()+a},b.getCookie=function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return e=document.cookie.match(n),e?unescape(e[2]):null},b.delCookie=function(t,e){var n=new Date;n.setTime(n.getTime()-1);var i=b.getCookie(t);e===!0&&(e=document.domain.replace(/[\a-\z\A-\Z]+/,""));var o=e?";domain="+e+";path=/":"";null!=i&&(document.cookie=t+"=11111;expires="+n.toGMTString()+o)},b.clearCookies=function(){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var e=t.length;e--;)document.cookie=t[e]+"=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;"},b.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},b.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},b.isFunc=function(t){return"[object Function]"===Object.prototype.toString.call(t)},b.collectLog=function(t,e,n){this.ajax({method:"GET",url:"/api/v2/weixinapi/collect_log?openid="+t+"&phone="+e+n})},Function.prototype.method=function(t,e){return this.prototype[t]||(this.prototype[t]=e),this},String.method("trim",function(){return this.replace(/^\s+|\s$/g,"")}),String.method("template",function(t){var e=this,n=t.length,i="",o=e;if(n)for(var a=t,t=null,r=0;n>r;r++){t=a[r],o=e;for(var c in t)o=o.replace(new RegExp("{"+c+"}","ig"),t[c]);i+=o}else if(t){for(var c in t)e=e.replace(new RegExp("{"+c+"}","ig"),t[c]);i=e}return i}),Array.method("contain",function(t){for(var e in this)if(this[e]===t)return!0;return!1}),dd.base=b}}(window),document.addEventListener("DOMContentLoaded",function(){!function(t){var e=t.dd||{};if(e.dialog)return e.dialog;var n={},i=document.documentElement,o=i.clientHeight,a=i.clientWidth,r=null,c=null,l=null,s=function(t){return Array.isArray(t)},d=function(t){document.body.appendChild(t)},p={genDom:function(t,e,n){if(t)if("[object Object]"===Object.prototype.toString.call(t,null)){t.type=t.type||"loading",t.bg=t.bg||"",t.op=t.op||"",t.width=t.width||"280px",t.d_bg=t.d_bg||"#fff",t.d_op=t.d_op||"",t.wallCss="background:"+t.bg+";opacity:"+t.op+";filter:"+t.filter+";",t.wrapCss="text-align:center;width:"+t.width+";height:"+t.height+";opacity:"+t.d_op+";filter:"+t.d_filter+";background: "+t.d_bg+";",e.style.cssText=t.wallCss,n.style.cssText=t.wrapCss;var i="<div style='"+("loading"===t.type?"padding:0px;":"padding: 0px 6%;")+"'>"+p.genIcon(t)+p.genTitle(t)+p.genTip(t)+p.genButtons(t)+"</div>"+p.genClose(t);n.innerHTML=i}else"[object String]"===Object.prototype.toString.call(t,null)?n.innerHTML=t:"[object HTMLDivElement]"===Object.prototype.toString.call(t,null)&&(n.style.cssText="display:inline-block;width:280px;background-color:#fff;",t.style.display="inline-block",n.appendChild(t))},genIcon:function(t){if(!t.icon)return"";var e="";t.icon=t.icon||{};var n=t.icon.width||"8px",i=t.icon.height||"36px",o=t.icon.url||"http://static.xiaojukeji.com/webapp/images/i-plaint.png",a="",r="",c="";return"loading"===t.type?(o=t.icon.url||"http://static.xiaojukeji.com/webapp/images/loading_2.gif",a="margin:36px 0 10px",c="display:inline-block;width:30px;height:30px;background:url("+o+") no-repeat;background-size:30px 30px;"):(a="margin:24px 0 12px",c="display:inline-block;width:60px;height:60px;background-color:#f0f0f0;background-size:60px 60px;border-radius:50%;",r='<span style="vertical-align:middle;display:inline-block;height:100%;"></span><img src='+o+' style="width:'+n+";height:"+i+';vertical-align:middle;" />'),e='<p  style="'+a+'"><span style="'+c+'">'+r+"</span></p>"},genTitle:function(t){t.title=t.title||{};var e=t.title.color||"#ff8a01",n=t.title.size||"1.9rem";return'<p style="margin-bottom: 5px;color:'+e+";font-size:"+n+';">'+(t.title.txt||"")+"</p>"},genTip:function(t){return t.title&&t.title.txt?(t.tip.color=t.tip.color||"#666",t.tip.size=t.tip.size||"1.4rem"):(t.tip.color=t.tip.color||"#333",t.tip.size=t.tip.size||"1.6rem"),t.tip?'<p style="'+("loading"!==t.type?"text-align:center;":"")+"line-height:1.9rem;color:"+t.tip.color+";font-size:"+t.tip.size+';">'+t.tip.txt+"</p>":""},genClose:function(t){return t.close?'<a class="d-close" href="javascript:void(0);"></a>':""},genButtons:function(t){var e="";if(t.btns&&s(t.btns)){e+='<div style="padding:20px 0;"  class="btn-cont">';for(var n=0,i=t.btns.length;i>n;n++){var o=t.btns[n];e+=o&&"alert"===t.type?'<a class="'+o.kls+'" id="'+o.id+'">'+o.val+"</a>":o&&"confirm"===t.type?'<a class="'+o.kls+'" id="'+o.id+'" style="width: 43%; height: 40px; line-height: 40px; margin:0 3%;">'+o.val+"</a>":'<a class="'+o.kls+'" id="'+o.id+'" style="margin:5px 0;">'+o.val+"</a>"}e+="</div>"}return t.ext&&"string"==typeof t.ext&&(e+=t.ext),e},addEvents:function(t){var e=null;if(t.close){var n=document.getElementsByClassName("d-close")[0];n.addEventListener("click",function(){l.hide()},!1)}if(s(t.btns)&&t.btns.length)for(var i=0,o=t.btns.length;o>i;i++)if(e=t.btns[i]){var a=e.event||"click",r=document.getElementById(e.id);r&&(r.removeEventListener(a,e.handler,!1),r.addEventListener(a,e.handler,!1))}}},u=function(t){return this instanceof u?(new u.fn.init(t),void 0):l=new u(t)};u.fn=u.prototype={constructor:u,init:function(e){if(e){var n=document.createElement("div"),i=document.createElement("div");n.id="d-wall",i.id="d-wrap",p.genDom(e,n,i),r&&document.body.removeChild(r),c&&document.body.removeChild(c),d(n),d(i),r=n,c=i,"[object Object]"===Object.prototype.toString.call(e,null)&&t.setTimeout(function(){p.addEvents(e)},400)}},show:function(){function e(i){t.removeEventListener(i.type,e,!1),n.reset.call(n)}var n=this;r&&c&&(n.reset(),r.style.display="block",c.style.display="inline-block",t.addEventListener("resize",e,!1),t.addEventListener("scroll",e,!1))},hide:function(){r&&c&&(r.style.display="none",c.style.display="none")},reset:function(){if(r&&c){c.style.top=(o-c.clientHeight-20)/2+"px",c.style.left=(a-c.clientWidth)/2+"px";var t=document.body.scrollHeight||document.documentElement.scrollHeight;r.style.width=a+"px",r.style.height=t+"px"}}},n.alert=function(t){var e={};"string"==typeof arguments[0]&&arguments[0]?(e.title=arguments[1]||"",e.tip=arguments[0],e.btn={val:arguments[2]||"我知道了"}):t&&"object"==typeof t&&(e=t),l=u({type:"alert",icon:e.icon||{url:"http://static.xiaojukeji.com/webapp/images/i-plaint.png",width:"8px",height:"36px"},title:{txt:e.title},tip:{txt:e.tip},btns:[{id:"btn-close",kls:"btn-orange",event:"click",val:e.btn&&e.btn.val||"我知道了",handler:function(t){l.hide(),"function"==typeof e.btn.handler&&e.btn.handler(t)}}]}),l.show()},n.confirm=function(t){var e={};"string"==typeof arguments[0]&&arguments[0]?(e.text=arguments[0]||"",e.confirm={},e.confirm.handler=arguments[1]):t&&"object"==typeof t&&(e=t);var n=e.cancel||{},i=e.confirm||{};l=u({type:"confirm",tip:{txt:e.text},icon:e.icon||{url:"http://static.xiaojukeji.com/webapp/images/i-plaint.png"},btns:[{id:n.id||"btn-cancel",val:n.val||"取消",kls:n.kls||"btn-white",event:n.event||"click",handler:function(t){l.hide(),"function"==typeof n.handler&&n.handler(t)}},{id:i.id||"btn-ok",val:i.val||"确定",kls:i.kls||"btn-orange",event:i.event||"click",handler:function(t){l.hide(),"function"==typeof i.handler&&i.handler(t)}}],ext:e.ext}),l.show()},n.loading=function(e){var n={};"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=e,l=u({type:"loading",bg:"#fff",d_bg:"#0c0d0d",d_op:"0.7",width:"140px",height:"140px",icon:e&&e.icon||{},tip:{txt:n.text||"正在加载",color:"#fff",size:"14px"}}),l.show(),n.time||(n.time=5e3),t.setTimeout(function(){l.hide(),console.log("function"==typeof n.hideCB),"function"==typeof n.hideCB&&n.hideCB()},n.time)},n.flatLoading=function(e){var n={};"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=e,l=u({type:"loading",bg:"#fff",op:"1",d_bg:"#fff",d_op:"1",width:"140px",height:"140px",icon:!0,tip:{txt:n.text||"",color:"#666",size:"14px"}}),l.show(),n.time||(n.time=5e3),t.setTimeout(function(){l.hide(),"function"==typeof n.hideCB&&n.hideCB()},n.time)},n.logoLoading=function(t,e){l=u('<div class="loading-car"><div class="bg"></div><div class="loading-car-icon"></div></div>'),l.show(),t||(t=5e3),setTimeout(function(){l.hide(),"function"==typeof e&&e()},t)},n.guideUdache=function(t){if(t){t.title=t.title||"",t.content=t.content||"",t.cancelVal=t.cancelVal||"取消叫车",t.confirmlVal=t.confirmlVal||"去看看",t.image_url="http://static.xiaojukeji.com/webapp/images/ad_biz.png";var e=u({type:"confirm",tip:{txt:"<span style='display:block;font-size:2.3rem;color:#ff8903;line-height:30px;margin-top:160px' >"+t.title+"</span><span style='color:#666;font-size:1.2rem;' >"+t.content+"</span>"},d_bg:"url("+t.image_url+") no-repeat #fff;background-size:100% auto;",height:"auto",close:t.close||!1,btns:[{id:"btn-cancel",val:t.cancelVal,kls:"btn-white",event:"click",handler:function(){e.hide(),t.cancelFn&&t.cancelFn()}},{id:"btn-ok",val:t.confirmlVal,kls:"btn-orange",event:"click",handler:function(){e.hide(),t.okFn&&t.okFn()}}]});e.show()}},n.tip=function(e){var n={};"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=e,n.time=parseInt(n.time)||600,l=u({type:"tip",bg:"#fff",d_bg:"#0c0d0d",d_op:"0.7",width:"140px",height:"140px",icon:n.icon||{url:"http://static.xiaojukeji.com/webapp/images/i-plaint.png",width:"8px",height:"36px"},tip:{txt:n.text||"温馨提醒",color:"#fff",size:"14px"}}),l.show(),t.setTimeout(function(){l.hide()},n.time)},n.Fn=u,t.dd=e,e.dialog=n}(window)},!1);